"use strict";

const VM = require("ethereumjs-vm")

if (typeof require!=="undefined" && require.main===module && !module.parent) {
	const vm = new VM();

	const d = "6b6872307834307368";
	const c = "6060604052600436106100405763ffffffff7c0100000000000000000000000000000000000000000000000000000000600035041663ea8796348114610154575b662386f26fc100003410610152577fec29ee18c83562d4f2e0ce62e38829741c2901da844c015385a94d8c9f03d486600260003660116000604051602001526040517f485631372d00000000000000000000000000000000000000000000000000000081526005810184848082843782019150508260ff167f0100000000000000000000000000000000000000000000000000000000000000028152600101935050505060206040518083038160008661646e5a03f1151561010157600080fd5b5050604051805190506040519081526040602082018190526011818301527f596f7572206b657920697320686572652e00000000000000000000000000000060608301526080909101905180910390a15b005b341561015f57600080fd5b61015260005473ffffffffffffffffffffffffffffffffffffffff9081169030163180156108fc0290604051600060405180830381858888f1935050505015156101a857600080fd5b5600a165627a7a7230582020304ba8cb5786445e5c47f840741111591a38057d40ac139568b31f9eaee3c70029";
	const v = "2386f26fc10000";
	
	vm.on("step", c=>{
		console.log("step:", c);
	});

	vm.runCode({
		value: Buffer.from(v, "hex"),
		code: Buffer.from(c,"hex"),
		data: Buffer.from(d,"hex"),
		gasLimit: Buffer.from("ffffffff","hex")
	},(err,res)=>{
		if (err) {throw(err);}
		 console.log("res.logs:",res.logs[0].slice(2)[0].toString("hex"));
		// console.log("res.selfdestruct:",res.selfdestruct);
		// console.log("res.return:",res.return);
	});
}